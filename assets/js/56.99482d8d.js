(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{500:function(t,s,a){"use strict";a.r(s);var e=a(2),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"design-pinterest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#design-pinterest"}},[t._v("#")]),t._v(" Design Pinterest")]),t._v(" "),s("h2",{attrs:{id:"requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[t._v("#")]),t._v(" Requirements")]),t._v(" "),s("h3",{attrs:{id:"functional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#functional"}},[t._v("#")]),t._v(" Functional")]),t._v(" "),s("ul",[s("li",[t._v("User can view pins in the home page.")]),t._v(" "),s("li",[t._v("User can see more pins when they scrolls down.")]),t._v(" "),s("li",[t._v("User can click into a pin and view details about the pin.")]),t._v(" "),s("li",[t._v("User can search for relevant pins using a search bar.")]),t._v(" "),s("li",[t._v("User can like and save a pin.")])]),t._v(" "),s("h3",{attrs:{id:"non-functional"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#non-functional"}},[t._v("#")]),t._v(" Non-functional")]),t._v(" "),s("ul",[s("li",[t._v("The system should be scalable. As user base grows, the system should be able to handle increased load.")]),t._v(" "),s("li",[t._v("The system have low latency. The feed should load quickly for users.")]),t._v(" "),s("li",[t._v("The system should support dark mode and accessible to users with disability.")]),t._v(" "),s("li",[t._v("The system should be highly available, users should be able to access the feed at any time.")])]),t._v(" "),s("h2",{attrs:{id:"tech-stack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tech-stack"}},[t._v("#")]),t._v(" Tech stack")]),t._v(" "),s("ul",[s("li",[t._v("React for building fast and modular UI components.")]),t._v(" "),s("li",[t._v("Redux for state management.")]),t._v(" "),s("li",[t._v("GraphQL as API for querying the server for efficient data retrieval.")])]),t._v(" "),s("h2",{attrs:{id:"architecture-components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#architecture-components"}},[t._v("#")]),t._v(" Architecture components")]),t._v(" "),s("h3",{attrs:{id:"user-interface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-interface"}},[t._v("#")]),t._v(" User interface")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("HomeFeed")]),t._v(" component\n"),s("ul",[s("li",[t._v("Display a grid of pins.")]),t._v(" "),s("li",[t._v("The container should be scrollable.")])])]),t._v(" "),s("li",[s("code",[t._v("PinCard")]),t._v(" component\n"),s("ul",[s("li",[t._v("Individual pin card used to display either photo or video.")]),t._v(" "),s("li",[t._v("When hovered over, it will show like and save buttons.")]),t._v(" "),s("li",[t._v("When clicked, it will take the user to pin detail view.")])])]),t._v(" "),s("li",[s("code",[t._v("PinDetailView")]),t._v(" component\n"),s("ul",[s("li",[t._v("Show the pin photo and video on the left side.")]),t._v(" "),s("li",[t._v("Show detail information about the pin, including author name, published time, text descriptions.")]),t._v(" "),s("li",[t._v("Show save and like button on the right side.")])])]),t._v(" "),s("li",[s("code",[t._v("SearchBar")]),t._v(" component\n"),s("ul",[s("li",[t._v("Show input box where user can input search keyboards.")]),t._v(" "),s("li",[t._v("When there is input, show a dropdown suggestion list that expands on what user types.")]),t._v(" "),s("li",[t._v('When user press "Enter" key or click on any suggestions or click the search button, search query is performed.')]),t._v(" "),s("li",[t._v("Loading state shown while server is generating response.")]),t._v(" "),s("li",[t._v("Search result shown after receiving response from server.")])])])]),t._v(" "),s("h3",{attrs:{id:"state-management"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#state-management"}},[t._v("#")]),t._v(" State management")]),t._v(" "),s("h3",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h2",{attrs:{id:"layout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#layout"}},[t._v("#")]),t._v(" Layout")]),t._v(" "),s("p",[t._v("Pinterest layout is also called masonry layout. It is a grid layout that works by placing elements in optimal positions based on the available vertical space.")]),t._v(" "),s("ul",[s("li",[t._v("Pins are rendered into fixed-with columns.")]),t._v(" "),s("li",[t._v("Preserve the aspect-ratio of the image.\n"),s("ul",[s("li",[s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("aspect-ratio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 4 / 3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("object-fit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cover"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])]),t._v(" "),s("li",[t._v("Show the same image of different size for different viewport.")]),t._v(" "),s("li",[t._v("Pagination support with infinite scroll and dom virtualization.")])]),t._v(" "),s("h3",{attrs:{id:"pin-positioning"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pin-positioning"}},[t._v("#")]),t._v(" Pin positioning")]),t._v(" "),s("p",[t._v("We should use "),s("code",[t._v("absolute")]),t._v(" position for the pins.")]),t._v(" "),s("p",[t._v("Here is an algorithm for balancing the heights.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getShortestColumn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("colHeights")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" shortestIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" minHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("shortestIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            shortestIndex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            minHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" shortestIndex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" pins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" pins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" shortestColumnIdx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getShortestColumn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    nextTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("shortestColumn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    nextLeft "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" shortestColumn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" pinWidth"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    colHeights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("shortestColumn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" pin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" gapY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    pin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"top"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"px"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"important"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"left"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextLeft "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"px"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"important"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    pin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"visibility"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"visible"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"important"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"dynamic-layout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-layout"}},[t._v("#")]),t._v(" Dynamic layout")]),t._v(" "),s("p",[t._v("When the screen width increases to a certain point, we will show more columns (i.e. have more pins per row). We can use "),s("code",[t._v("media")]),t._v(" query in CSS to control this.")]),t._v(" "),s("h2",{attrs:{id:"accessibility"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#accessibility"}},[t._v("#")]),t._v(" Accessibility")]),t._v(" "),s("h2",{attrs:{id:"deep-dive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deep-dive"}},[t._v("#")]),t._v(" Deep dive")]),t._v(" "),s("h3",{attrs:{id:"infinite-scroll"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#infinite-scroll"}},[t._v("#")]),t._v(" Infinite scroll")]),t._v(" "),s("p",[t._v("In traditional pagination, we organize documents by pages. Each page will hold a certain number of items and display them as the user decides to navigate forward and back, clicking either page number or the arrow icon.")]),t._v(" "),s("p",[t._v("However, this approach requires manual user clicks to access more pages. With "),s("em",[t._v("infinite scroll")]),t._v(", we can solve this issue by dynamically appending the pages as the user scrolls, incrementing the page one at a time until we run through all the pages. With this approach, we could reduce interruption, lower the user interaction cost, and make it more user friendly.")]),t._v(" "),s("p",[t._v("Drawbacks:")]),t._v(" "),s("ol",[s("li",[t._v("Difficult to refind content since we don't have page number.")]),t._v(" "),s("li",[t._v("Inability to access the footer.")]),t._v(" "),s("li",[t._v("Increased page load. May affect experience of user with low network bandwidth.")])]),t._v(" "),s("h3",{attrs:{id:"implementation-using-intersection-observer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementation-using-intersection-observer"}},[t._v("#")]),t._v(" Implementation using "),s("code",[t._v("Intersection Observer")])]),t._v(" "),s("blockquote",[s("p",[t._v("The Intersection Observer API provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with a top-level document's viewport.")])]),t._v(" "),s("p",[t._v("Intersection information is useful for:")]),t._v(" "),s("ol",[s("li",[t._v("Lazy-loading of images or other content as a page is scrolled.")]),t._v(" "),s("li",[t._v('Implement "infinite scrolling" website.')]),t._v(" "),s("li",[t._v("Reporting of visibility of advertisements in order to calculate ad revenues.")]),t._v(" "),s("li",[t._v("Deciding whether or not to perform tasks or animation processes based on whether or not the user will see the result.")])]),t._v(" "),s("p",[t._v("Here is how to create an interaction observer:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("root")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#scrollableArea"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rootMargin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"50px"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("threshold")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InteractionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// callback")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    entires"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Each entry describes an intersection change for one observed target element:")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.boundingClientRect")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.intersectionRatio 0.0 - 1.0")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.intersectionRect")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.isIntersecting bool")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.rootBounds")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.target")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry.time")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nobserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unobserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"optimizations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#optimizations"}},[t._v("#")]),t._v(" Optimizations")]),t._v(" "),s("p",[t._v("Cursor-based pagination")]),t._v(" "),s("ul",[s("li",[t._v("Supports real-time data capabilities")]),t._v(" "),s("li",[t._v("Better performance with large dataset")]),t._v(" "),s("li",[t._v("Resilient to data changes (no skipping or duplicate like offset-based approach)")])]),t._v(" "),s("p",[t._v("Error handling")]),t._v(" "),s("p",[t._v("When images loading returns an error:")]),t._v(" "),s("ul",[s("li",[t._v("Smart retries")]),t._v(" "),s("li",[t._v("Silent ignore")])])])}),[],!1,null,null,null);s.default=n.exports}}]);