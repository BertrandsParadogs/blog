<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript Scope | Fan&#39;s Tech Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="Always learning. Always day 1">
    
    <link rel="preload" href="/assets/css/0.styles.af5fcc13.css" as="style"><link rel="preload" href="/assets/js/app.bc1207cb.js" as="script"><link rel="preload" href="/assets/js/7.319625fa.js" as="script"><link rel="preload" href="/assets/js/2.36894e0f.js" as="script"><link rel="preload" href="/assets/js/1.609d0535.js" as="script"><link rel="preload" href="/assets/js/53.bee1a172.js" as="script"><link rel="prefetch" href="/assets/js/10.9aa2da90.js"><link rel="prefetch" href="/assets/js/11.02374a31.js"><link rel="prefetch" href="/assets/js/14.55b63e6f.js"><link rel="prefetch" href="/assets/js/15.34f598dc.js"><link rel="prefetch" href="/assets/js/16.5dd2b264.js"><link rel="prefetch" href="/assets/js/17.14ef9141.js"><link rel="prefetch" href="/assets/js/18.87d5f1a6.js"><link rel="prefetch" href="/assets/js/19.4d711b9e.js"><link rel="prefetch" href="/assets/js/20.6b616829.js"><link rel="prefetch" href="/assets/js/21.3475f9b3.js"><link rel="prefetch" href="/assets/js/22.093cc6ec.js"><link rel="prefetch" href="/assets/js/23.87d81af8.js"><link rel="prefetch" href="/assets/js/24.a577eef5.js"><link rel="prefetch" href="/assets/js/25.16e60a6e.js"><link rel="prefetch" href="/assets/js/26.48b4c123.js"><link rel="prefetch" href="/assets/js/27.2dc2db17.js"><link rel="prefetch" href="/assets/js/28.df5dcb04.js"><link rel="prefetch" href="/assets/js/29.c2ff1411.js"><link rel="prefetch" href="/assets/js/3.26c447a7.js"><link rel="prefetch" href="/assets/js/30.3c88eacc.js"><link rel="prefetch" href="/assets/js/31.c662f35f.js"><link rel="prefetch" href="/assets/js/32.a35ced2c.js"><link rel="prefetch" href="/assets/js/33.e363f8e9.js"><link rel="prefetch" href="/assets/js/34.de462076.js"><link rel="prefetch" href="/assets/js/35.7359b50a.js"><link rel="prefetch" href="/assets/js/36.e86e9663.js"><link rel="prefetch" href="/assets/js/37.a4830724.js"><link rel="prefetch" href="/assets/js/38.21cfa911.js"><link rel="prefetch" href="/assets/js/39.a78d25c6.js"><link rel="prefetch" href="/assets/js/4.f769c074.js"><link rel="prefetch" href="/assets/js/40.46cb3e69.js"><link rel="prefetch" href="/assets/js/41.6f8c7353.js"><link rel="prefetch" href="/assets/js/42.1417b849.js"><link rel="prefetch" href="/assets/js/43.300122da.js"><link rel="prefetch" href="/assets/js/44.56a6e140.js"><link rel="prefetch" href="/assets/js/45.5e9c26ec.js"><link rel="prefetch" href="/assets/js/46.09b29906.js"><link rel="prefetch" href="/assets/js/47.7e527074.js"><link rel="prefetch" href="/assets/js/48.ef1d7792.js"><link rel="prefetch" href="/assets/js/49.89617a93.js"><link rel="prefetch" href="/assets/js/5.5d6cdf4c.js"><link rel="prefetch" href="/assets/js/50.3b75d281.js"><link rel="prefetch" href="/assets/js/51.f163ae57.js"><link rel="prefetch" href="/assets/js/52.392a4e28.js"><link rel="prefetch" href="/assets/js/54.2bee3902.js"><link rel="prefetch" href="/assets/js/55.a4088691.js"><link rel="prefetch" href="/assets/js/56.99482d8d.js"><link rel="prefetch" href="/assets/js/57.ef5e798c.js"><link rel="prefetch" href="/assets/js/6.b0bdd9d9.js"><link rel="prefetch" href="/assets/js/8.e6dbedf9.js"><link rel="prefetch" href="/assets/js/9.9a649064.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.2e8be5b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.af5fcc13.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Fan's Tech Blog</h3> <p class="description" data-v-59e6cb88>Always learning. Always day 1</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Fan's Tech Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  Main Page
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      ⛵️ Fan's Tech Blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/BertrandsParadogs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://linkedin.com/in/fanyang19" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Linkedin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>18</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  Main Page
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      ⛵️ Fan's Tech Blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/BertrandsParadogs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://linkedin.com/in/fanyang19" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Linkedin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/about/about_me" class="sidebar-heading clickable"><span>About me</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/about/about_me.html" class="sidebar-link">Intro</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/javascript/scope" class="sidebar-heading clickable open active"><span>JavaScript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/javascript/scope.html" aria-current="page" class="active sidebar-link">Scope</a></li><li><a href="/javascript/closure.html" class="sidebar-link">Closure</a></li><li><a href="/javascript/hoisting.html" class="sidebar-link">Hoisting</a></li><li><a href="/javascript/event.html" class="sidebar-link">Event</a></li><li><a href="/javascript/dom.html" class="sidebar-link">DOM</a></li><li><a href="/javascript/promise.html" class="sidebar-link">Promise</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/css/overview" class="sidebar-heading clickable"><span>CSS</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/css/overview.html" class="sidebar-link">Overview</a></li><li><a href="/css/selectors.html" class="sidebar-link">CSS Selectors</a></li><li><a href="/css/layout.html" class="sidebar-link">CSS Layout</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/web_dev/https" class="sidebar-heading clickable"><span>Web Development</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/web_dev/https.html" class="sidebar-link">HTTPS</a></li><li><a href="/web_dev/http_status_code.html" class="sidebar-link">HTTP Status Code</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/system_design/pagination" class="sidebar-heading clickable"><span>System Design</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/system_design/pagination.html" class="sidebar-link">Pagination</a></li><li><a href="/system_design/cap_theorem.html" class="sidebar-link">CAP Theorem</a></li><li><a href="/system_design/load_balance.html" class="sidebar-link">Load Balance</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">JavaScript Scope</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="javascript-scope"><a href="#javascript-scope" class="header-anchor">#</a> JavaScript Scope</h1> <h2 id="what-is-scope"><a href="#what-is-scope" class="header-anchor">#</a> What is scope?</h2> <blockquote><p>From MDN, &quot;The scope is the current context of execution in which values and expressions are &quot;visible&quot; or can be referenced. If a variable or expression is not in the current scope, it will not be available for use. &quot;</p></blockquote> <p>Scope is a set of rules that determine if variables are visible or accessible to the current executing program.</p> <h2 id="why-should-i-care-about-scope"><a href="#why-should-i-care-about-scope" class="header-anchor">#</a> Why should I care about scope?</h2> <ol><li>Understanding scope is essential for understanding <a href="/javascript/closure"><em>closure</em></a> which is heavily used in functional programming, <a href="/javascript/hoisting"><em>hoisting</em></a>, and <code>this</code> keyword.</li> <li>Scope provides encapsulation that can protect variables from unauthorized changes.</li> <li>Locally scoped variables are easier to garbage collect. Leading to efficient resource usage and performance gain.</li> <li>Correctly scoped variables are easier to understand, track, and debug.</li></ol> <h2 id="types-of-scope"><a href="#types-of-scope" class="header-anchor">#</a> Types of scope</h2> <p>| Global Scope, Function Scope, Block Scope |</p> <h2 id="global-scope"><a href="#global-scope" class="header-anchor">#</a> Global scope</h2> <p>The outermost scope where variables, functions, and objects are accessible from any part of the code.</p> <p>Any variable declared outside of a function or block fails in the &quot;global scope.&quot; This means the variable can be accessed and modified (except for <code>const</code>) from anywhere in the code after it has been declared.</p> <p>Global variables are automatically also properties of the global object (<code>window</code> in browsers, <code>global</code> in node.js), so it is possible to reference a global variable not directly by its lexical name, but instead indirectly as a property reference of the global object.<br> <code>window.a</code><br>
This technique gives access to a global variable that would otherwise be inaccessible due to it being shadowed. However, non-global shadowed variables cannot be accessed.</p> <h3 id="best-practices"><a href="#best-practices" class="header-anchor">#</a> Best Practices</h3> <ol><li><p>Limit Global Variables: Use them sparingly to avoid collisions and unexpected behaviors.</p></li> <li><p>Name-spacing: If you must use global variables, consider grouping them under a single global object to manage them better.</p></li> <li><p>Use <code>let</code> and <code>const</code>: These keywords don't create properties on the global object when they're used to declare global variables, providing a slight layer of insulation.</p></li> <li><p>Module Pattern: In modern JavaScript, you can use modules to encapsulate code and expose only the necessary parts, thereby avoiding the global scope altogether.</p></li></ol> <h2 id="function-scope"><a href="#function-scope" class="header-anchor">#</a> Function scope</h2> <p>A function creates a scope, so that variables declared exclusively within a function cannot be accessed outside the function.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">exampleFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// start of function scope</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token string">&quot;declared inside function&quot;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Inside function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
    <span class="token comment">// end of function scope</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError: x not defined</span>
</code></pre></div><p>Instead of thinking that we are declaring a function and adding some code in it, we could think inversely that we are putting some code inside a function in order to &quot;hide&quot; declarations of variables or functions from the outer scope. -&gt; encapsulation</p> <h3 id="function-expression"><a href="#function-expression" class="header-anchor">#</a> Function expression</h3> <p>The previous approach of wrapping code inside a function can help encapsulate declarations within the function. But it comes with drawbacks: 1) we still need to expose this function to the outer scope. 2) we need to explicitly call the function we defined to run the code.</p> <blockquote><p>It would be more ideal if the function didn’t need a name (or, rather, the name didn’t pollute the enclosing scope), and if the function could automatically be executed.</p></blockquote> <p>Function expression solves both of these problems.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">(</span>
    <span class="token comment">// Immediately invoked function expression (IIFE)</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo is bounded by its own scope</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p><strong>Anonymous function expression</strong>: no name identifier associated with a function.
For example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomethingAfterSec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>It's easy to type and we could use <code>() =&gt; {}</code> arrow function to further simply it. However, there are several drawbacks to consider:</p> <ol><li>Without an identifiable name, we cannot locate it on stack trace.</li> <li>Function cannot refer to itself (rip recursion).</li> <li>Code may not be readable and understandable sometimes.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timeoutHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// better</span>
    <span class="token function">doSomethingAfterSec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="block-scope"><a href="#block-scope" class="header-anchor">#</a> Block scope</h2> <p>The scope created with curly braces pair.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token comment">// this is within block scope</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError!</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><p>Blocks only scope <code>let</code> and <code>const</code> declarations, but not <code>var</code> declarations.</p> <p>The <code>let</code> and <code>const</code> keyword attaches the variable declaration to the scope of whatever block (commonly a <code>{ .. }</code> pair) it’s contained in. In other words, let implicitly hijacks any block’s scope for its variable declaration.</p> <p>We can also be more explicit in hijacking block scope:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ^-- explicit block</span>
        <span class="token keyword">let</span> bar <span class="token operator">=</span> foo <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
        bar <span class="token operator">=</span> <span class="token function">something</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError!</span>
</code></pre></div><h3 id="garbage-collection"><a href="#garbage-collection" class="header-anchor">#</a> Garbage collection</h3> <p>Block scope can be useful for reclaiming memory with garbage collection.</p> <p>For example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">processData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something with the data</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> someBigData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">processData</span><span class="token punctuation">(</span>someBigData<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// not using someBigData</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the above example, if we are sure we don't need the <code>someBigData</code> after we processing it, we should garbage collect it. However, in some case, the data may continue to live in memory due to closure in subsequent functions.</p> <p>To guarantee the release of <code>someBigData</code>, we can create an explicit block scope for it.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">processData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something with the data</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
    <span class="token keyword">const</span> someBigData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">processData</span><span class="token punctuation">(</span>someBigData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// not using someBigData</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now the resource should be released after the end of the block scope.</p> <h2 id="nested-scope"><a href="#nested-scope" class="header-anchor">#</a> Nested scope</h2> <p>Scopes could be nested, think of them as containers -- one scope can contain multiple scopes, but not as Venn diagrams -- two scopes should either have no overlap or one completely overlaps the other.</p> <p>Simple rules for nested scope traversal:
Engine starts at the currently executing scope, looks for the variable there, then if not found, keeps going up one level, and so on. If the outermost global scope is reached, the search stops, whether it finds the variable or not.</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/about/about_me.html" class="prev">
          Intro
        </a></span> <span class="next"><a href="/javascript/closure.html">
          Closure
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#what-is-scope" class="sidebar-link reco-side-what-is-scope" data-v-b57cc07c>What is scope?</a></li><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#why-should-i-care-about-scope" class="sidebar-link reco-side-why-should-i-care-about-scope" data-v-b57cc07c>Why should I care about scope?</a></li><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#types-of-scope" class="sidebar-link reco-side-types-of-scope" data-v-b57cc07c>Types of scope</a></li><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#global-scope" class="sidebar-link reco-side-global-scope" data-v-b57cc07c>Global scope</a></li><li class="level-3" data-v-b57cc07c><a href="/javascript/scope.html#best-practices" class="sidebar-link reco-side-best-practices" data-v-b57cc07c>Best Practices</a></li><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#function-scope" class="sidebar-link reco-side-function-scope" data-v-b57cc07c>Function scope</a></li><li class="level-3" data-v-b57cc07c><a href="/javascript/scope.html#function-expression" class="sidebar-link reco-side-function-expression" data-v-b57cc07c>Function expression</a></li><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#block-scope" class="sidebar-link reco-side-block-scope" data-v-b57cc07c>Block scope</a></li><li class="level-3" data-v-b57cc07c><a href="/javascript/scope.html#garbage-collection" class="sidebar-link reco-side-garbage-collection" data-v-b57cc07c>Garbage collection</a></li><li class="level-2" data-v-b57cc07c><a href="/javascript/scope.html#nested-scope" class="sidebar-link reco-side-nested-scope" data-v-b57cc07c>Nested scope</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.bc1207cb.js" defer></script><script src="/assets/js/7.319625fa.js" defer></script><script src="/assets/js/2.36894e0f.js" defer></script><script src="/assets/js/1.609d0535.js" defer></script><script src="/assets/js/53.bee1a172.js" defer></script>
  </body>
</html>
